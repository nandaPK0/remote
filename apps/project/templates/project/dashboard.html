{% extends 'home/base.html' %}

{% block content %}

<button type="submit"><a href="/project/new/">Start New Project</a></button>

<div>
    <table id="projects">
        <thead>
            <th> Name </th>     
            <th> Status </th>
            <th> Updated At </th> 
        </thead>
        <tbody>
            {% for project in projects %}
            <tr>
                <td><a href="/project/details/{{project.id}}"> {{ project.name }} </a></td>
                <td> {{ project.status }} </td> 
                {% load tz %}
                    <td>{{ project.updated_at | timezone:"Asia/Kolkata" }}</td> 
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock content %}

{% block js %}
(function(){
    $('#projects').dataTable();
    $('div#projects_length').hide();
})();

// java script 
(function ($) {
$.fn.localTimeFromUTC = function (format) {

return this.each(function () {

// get time offset from browser
var currentDate = new Date();
var offset = -(currentDate.getTimezoneOffset() / 60);

// get provided date
var tagText = $(this).html();
var givenDate = new Date(tagText);

// apply offset
var hours = givenDate.getHours();
hours += offset;
givenDate.setHours(hours);

// format the date
var localDateString = $.format.date(givenDate, format);
$(this).html(localDateString);
});
};
})(jQuery);
{% endblock js %}
